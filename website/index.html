<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SE7EN - Take Back Control of Your Screen Time</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="fixed-header">
        <div class="header-content">
            <div class="logo-container">
                <img src="assets/se7enlogo.png" alt="SE7EN" class="logo-image">
                <span class="logo-text">SE<span class="logo-seven">7</span>EN</span>
            </div>
            <div class="waitlist-form" id="waitlist-form">
                <input type="email" placeholder="Enter your email" class="email-input" id="waitlist-email">
                <button type="submit" class="waitlist-button" onclick="handleWaitlist(event)">Join Waitlist</button>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="rating">
                <div class="stars">★★★★★</div>
            </div>
            
            <h1 class="hero-title">
                Your screen is ruining you.<br>
                <span class="highlight">Take back your life with SE7EN.</span>
            </h1>
            
            <div class="app-badges">
                <a href="#waitlist-form" class="badge-link" onclick="scrollToWaitlist(event)">
                    <img src="assets/app-store-badge.svg" alt="Join Waitlist" class="store-badge">
                </a>
            </div>

            <div class="phone-mockup">
                <img src="assets/se7enonboarding.png" alt="SE7EN App Screenshot" class="app-screenshot">
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="features">
        <div class="container">
            <h2 class="section-title">Everything You Need to Succeed</h2>
            
            <div class="features-grid-extended">
                <!-- Row 1 -->
                <div class="feature-card-extended feature-tall">
                    <h3 class="feature-title-extended">7-Credit System</h3>
                    <p class="feature-description-extended">Stay accountable with our unique credit-based approach. You start each day with 7 credits. Stay within your daily app limits and pay nothing. If you exceed a limit, you have two choices: pay $0.99 per credit to extend your time immediately, or wait until the next day when your credits reset back to 7. This system keeps you accountable by making the cost of breaking your limits real, motivating you to build better habits.</p>
                    <img src="assets/credits.png" alt="7-Credit System" class="feature-screenshot credits-image">
                </div>
                
                <div class="feature-card-extended feature-standard">
                    <img src="assets/gamification.png" alt="Gamification" class="feature-screenshot">
                    <h3 class="feature-title-extended">Gamification</h3>
                    <p class="feature-description-extended">Build daily discipline streaks and unlock achievements as you stay within your limits. Track your progress and celebrate milestones.</p>
                </div>
                
                <div class="feature-card-extended feature-standard feature-stats-monitoring">
                    <h3 class="feature-title-extended">Real-time Stats Monitoring</h3>
                    <p class="feature-description-extended">Track app usage live with Screen Time API. See exactly how much time you've spent on each app throughout the day, updated in real-time as you use your device.</p>
                    <div class="stats-image-container">
                        <img src="assets/stats1.png" alt="Stats 1" class="stats-image stats-image-1">
                        <img src="assets/stats2.png" alt="Stats 2" class="stats-image stats-image-2">
                        <img src="assets/stats3.png" alt="Stats 3" class="stats-image stats-image-3">
                    </div>
                </div>
                
                <!-- Row 2 -->
                <div class="feature-card-extended feature-standard">
                    <h3 class="feature-title-extended">Zero-minute Blocking</h3>
                    <p class="feature-description-extended">Completely block distracting apps instantly. Set a limit of zero minutes to prevent access entirely and stay focused.</p>
                </div>
                
                <div class="feature-card-extended feature-tall">
                    <img src="assets/Petcompanion.png" alt="Pet Companion" class="feature-screenshot">
                    <h3 class="feature-title-extended">Pet Companion</h3>
                    <p class="feature-description-extended">Your own personal virtual pet reflects your digital health. Name your pet to make it feel personal to you. Keep it happy by managing your screen time wisely. Choose from dog, cat, bunny, hamster and horse.</p>
                    <img src="assets/chooserenamepet.png" alt="Choose and Rename Pet" class="feature-screenshot">
                </div>
                
                <!-- Row 3 -->
                <div class="feature-card-extended feature-standard">
                    <h3 class="feature-title-extended">Time-based Blocking</h3>
                    <p class="feature-description-extended">Block apps during specific hours like 9pm to 9am. Set it to daily, weekly or one time. Changes take effect immediately or the next day if there's limits already applied.</p>
                    <img src="assets/TrackusageMonitor.png" alt="Time-based Blocking" class="feature-screenshot">
                </div>
                
                <div class="feature-card-extended feature-standard feature-coach-insights">
                    <div class="coach-insights-image-container">
                        <img src="assets/lighthome.png" alt="Dark and Light Modes Light Mode" class="coach-insights-image coach-insights-light">
                        <img src="assets/darkhome.png" alt="Dark and Light Modes Dark Mode" class="coach-insights-image coach-insights-dark">
                    </div>
                    <h3 class="feature-title-extended">Dark and Light Modes</h3>
                    <p class="feature-description-extended">Switch between our dark and light themes in settings to match your personal preference and reduce eye strain.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Quote Section -->
    <section class="quote-section">
        <div class="container">
            <blockquote class="app-quote">
                Designed with simplicity in mind, SE7EN creates an effortless experience that helps you reclaim your time and focus your attention on what truly matters — your life beyond the screen.
            </blockquote>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <h2 class="cta-title">Ready to take back control?</h2>
            <p class="cta-subtitle">Join thousands building healthier digital habits with SE7EN</p>
            
            <div class="app-badges">
                <a href="#waitlist-form" class="badge-link" onclick="scrollToWaitlist(event)">
                    <img src="assets/app-store-badge.svg" alt="Join Waitlist" class="store-badge">
                </a>
            </div>
            <p class="release-date">Available December 2025</p>
        </div>
    </section>

    <!-- Waitlist Popup Modal -->
    <div id="waitlist-popup" class="waitlist-popup">
        <div class="waitlist-popup-backdrop"></div>
        <div class="waitlist-popup-content">
            <button class="waitlist-popup-close" onclick="closeWaitlistPopup()" aria-label="Close">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            
            <div class="waitlist-popup-header">
                <div class="waitlist-popup-logo">
                    <span class="waitlist-popup-logo-text">SE<span class="waitlist-popup-seven">7</span>EN</span>
                </div>
                <h2 class="waitlist-popup-title">Don't Miss Out!</h2>
                <p class="waitlist-popup-subtitle">Join thousands getting early access to SE7EN. Be the first to take back control of your screen time.</p>
            </div>
            
            <div class="waitlist-popup-form">
                <input type="email" placeholder="Enter your email address" class="waitlist-popup-input" id="popup-waitlist-email">
                <button type="submit" class="waitlist-popup-button" onclick="handlePopupWaitlist(event)">
                    <span class="button-text">Join Waitlist</span>
                    <span class="button-icon">→</span>
                </button>
            </div>
            
            <p class="waitlist-popup-note">✨ We'll notify you when SE7EN launches. No spam, promise.</p>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-links">
                <a href="privacy.html">Privacy</a>
                <a href="terms.html">Terms</a>
                <a href="faq.html">FAQ</a>
                <a href="mailto:support@se7enapp.com">Contact</a>
            </div>
            <p class="copyright">© 2025 SE7EN. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // API Configuration
        // Option 1: Set via Netlify environment variable (recommended)
        // In Netlify: Site Settings → Environment Variables → Add "API_URL"
        // Option 2: Update the fallback URL below with your Railway API URL
        const API_URL = (function() {
            // Check for Netlify injected variable (set during build)
            if (typeof window.API_URL !== 'undefined') {
                return window.API_URL;
            }
            // Fallback: Update this with your Railway API URL
            return 'https://your-railway-api.up.railway.app';
        })();
        
        async function handleWaitlist(event) {
            event.preventDefault();
            const emailInput = document.getElementById('waitlist-email');
            const submitButton = document.querySelector('.waitlist-button');
            const email = emailInput.value.trim();
            
            // Basic validation
            if (!email || !email.includes('@')) {
                showMessage('Please enter a valid email address.', 'error');
                return;
            }
            
            // Disable button and show loading state
            submitButton.disabled = true;
            submitButton.textContent = 'Joining...';
            
            try {
                const response = await fetch(`${API_URL}/api/waitlist`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ email: email })
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    showMessage(data.message, 'success');
                    emailInput.value = '';
                } else {
                    showMessage(data.error || 'Something went wrong. Please try again.', 'error');
                }
            } catch (error) {
                console.error('Waitlist error:', error);
                showMessage('Unable to connect. Please check your connection and try again.', 'error');
            } finally {
                // Re-enable button
                submitButton.disabled = false;
                submitButton.textContent = 'Join Waitlist';
            }
        }
        
        function showMessage(message, type) {
            // Remove existing message if any
            const existingMessage = document.querySelector('.waitlist-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            // Create message element
            const messageEl = document.createElement('div');
            messageEl.className = `waitlist-message waitlist-message-${type}`;
            messageEl.textContent = message;
            
            // Insert after waitlist form
            const waitlistForm = document.getElementById('waitlist-form');
            waitlistForm.parentNode.insertBefore(messageEl, waitlistForm.nextSibling);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                messageEl.style.opacity = '0';
                setTimeout(() => messageEl.remove(), 300);
            }, 5000);
        }

        // Allow Enter key to submit
        document.getElementById('waitlist-email').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                handleWaitlist(e);
            }
        });

        // Show waitlist popup when App Store button is clicked
        function scrollToWaitlist(event) {
            event.preventDefault();
            // Force show the popup (even if user already joined)
            showWaitlistPopup(true);
        }

        // Dark and Light Modes Image Animation
        document.addEventListener('DOMContentLoaded', function() {
            const lightImage = document.querySelector('.coach-insights-light');
            const darkImage = document.querySelector('.coach-insights-dark');
            
            if (!lightImage || !darkImage) {
                console.log('Images not found');
                return;
            }
            
            let isLightMode = true;
            
            function switchImage() {
                if (isLightMode) {
                    // Switch to dark mode
                    lightImage.classList.remove('active');
                    darkImage.classList.add('active');
                    isLightMode = false;
                } else {
                    // Switch to light mode
                    darkImage.classList.remove('active');
                    lightImage.classList.add('active');
                    isLightMode = true;
                }
            }
            
            // Start with light mode active
            lightImage.classList.add('active');
            
            // Switch images every 3 seconds
            setInterval(switchImage, 3000);
        });

        // Stats Monitoring Image Animation
        document.addEventListener('DOMContentLoaded', function() {
            const statsImage1 = document.querySelector('.stats-image-1');
            const statsImage2 = document.querySelector('.stats-image-2');
            const statsImage3 = document.querySelector('.stats-image-3');
            
            if (!statsImage1 || !statsImage2 || !statsImage3) {
                console.log('Stats images not found');
                return;
            }
            
            let currentIndex = 0;
            const statsImages = [statsImage1, statsImage2, statsImage3];
            
            function switchStatsImage() {
                // Remove active class from current image
                statsImages[currentIndex].classList.remove('active');
                
                // Move to next image (cycle back to 0 after 2)
                currentIndex = (currentIndex + 1) % 3;
                
                // Add active class to new image
                statsImages[currentIndex].classList.add('active');
            }
            
            // Start with first image active
            statsImage1.classList.add('active');
            
            // Switch images every 3 seconds
            setInterval(switchStatsImage, 3000);
        });

        // Waitlist Popup Functionality
        let scrollTimer = null;
        let hasScrolled = false;
        let popupShown = false;
        const POPUP_DELAY = 15000; // Show after 15 seconds of scrolling
        const MIN_SCROLL_DISTANCE = 400; // Minimum pixels scrolled
        const TIME_BASED_DELAY = 25000; // Show after 25 seconds regardless

        // Check if user has already joined waitlist
        function hasJoinedWaitlist() {
            return localStorage.getItem('se7en_waitlist_joined') === 'true';
        }

        // Mark user as joined
        function markWaitlistJoined() {
            localStorage.setItem('se7en_waitlist_joined', 'true');
        }

        // Show popup with animation
        function showWaitlistPopup(forceShow = false) {
            // If already shown and not forced, don't show again
            if (popupShown && !forceShow) {
                return;
            }
            
            // If user already joined and not forced, don't show automatically
            if (hasJoinedWaitlist() && !forceShow) {
                return;
            }
            
            const popup = document.getElementById('waitlist-popup');
            if (popup) {
                popup.classList.add('show');
                popupShown = true;
                document.body.style.overflow = 'hidden'; // Prevent background scrolling
                
                // Focus email input after popup appears
                setTimeout(() => {
                    const emailInput = document.getElementById('popup-waitlist-email');
                    if (emailInput) {
                        emailInput.focus();
                    }
                    
                    // Add subtle shake to draw attention
                    const content = popup.querySelector('.waitlist-popup-content');
                    content.style.animation = 'slideUpBounce 0.7s cubic-bezier(0.34, 1.56, 0.64, 1), subtleShake 0.5s ease-in-out 1s';
                }, 100);
            }
        }

        // Close popup with animation
        function closeWaitlistPopup() {
            const popup = document.getElementById('waitlist-popup');
            if (popup) {
                const content = popup.querySelector('.waitlist-popup-content');
                content.style.animation = 'slideDownFade 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards';
                
                setTimeout(() => {
                    popup.classList.remove('show');
                    document.body.style.overflow = ''; // Restore scrolling
                    content.style.animation = ''; // Reset animation
                }, 400);
            }
        }

        // Handle popup waitlist submission
        async function handlePopupWaitlist(event) {
            event.preventDefault();
            const emailInput = document.getElementById('popup-waitlist-email');
            const submitButton = event.target;
            const buttonText = submitButton.querySelector('.button-text');
            const buttonIcon = submitButton.querySelector('.button-icon');
            const email = emailInput.value.trim();
            
            // Basic validation
            if (!email || !email.includes('@')) {
                showPopupMessage('Please enter a valid email address.', 'error');
                emailInput.focus();
                return;
            }
            
            // Disable button and show loading state
            submitButton.disabled = true;
            buttonText.textContent = 'Joining...';
            buttonIcon.textContent = '⏳';
            
            try {
                const response = await fetch(`${API_URL}/api/waitlist`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ email: email })
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    showPopupMessage(data.message, 'success');
                    markWaitlistJoined();
                    emailInput.value = '';
                    buttonText.textContent = 'Joined!';
                    buttonIcon.textContent = '✓';
                    
                    // Close popup after 2.5 seconds
                    setTimeout(() => {
                        closeWaitlistPopup();
                    }, 2500);
                } else {
                    showPopupMessage(data.error || 'Something went wrong. Please try again.', 'error');
                    buttonText.textContent = 'Join Waitlist';
                    buttonIcon.textContent = '→';
                    submitButton.disabled = false;
                }
            } catch (error) {
                console.error('Waitlist error:', error);
                showPopupMessage('Unable to connect. Please check your connection and try again.', 'error');
                buttonText.textContent = 'Join Waitlist';
                buttonIcon.textContent = '→';
                submitButton.disabled = false;
            }
        }

        function showPopupMessage(message, type) {
            // Remove existing message if any
            const existingMessage = document.querySelector('.waitlist-popup-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            // Create message element
            const messageEl = document.createElement('div');
            messageEl.className = `waitlist-popup-message waitlist-popup-message-${type}`;
            messageEl.textContent = message;
            
            // Insert after form
            const form = document.querySelector('.waitlist-popup-form');
            form.parentNode.insertBefore(messageEl, form.nextSibling);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                messageEl.style.opacity = '0';
                setTimeout(() => messageEl.remove(), 300);
            }, 5000);
        }

        // Track scrolling behavior
        function handleScroll() {
            if (popupShown || hasJoinedWaitlist()) {
                return;
            }

            hasScrolled = true;
            
            // Reset timer on each scroll
            if (scrollTimer) {
                clearTimeout(scrollTimer);
            }
            
            // Show popup after delay if user has scrolled enough
            if (window.scrollY > MIN_SCROLL_DISTANCE) {
                scrollTimer = setTimeout(() => {
                    if (window.scrollY > MIN_SCROLL_DISTANCE && !popupShown) {
                        showWaitlistPopup();
                    }
                }, POPUP_DELAY);
            }
        }

        // Initialize popup functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Don't show if already joined
            if (hasJoinedWaitlist()) {
                return;
            }

            // Start tracking scroll after a short delay
            setTimeout(() => {
                window.addEventListener('scroll', handleScroll, { passive: true });
                
                // Time-based fallback - show after 12 seconds regardless
                setTimeout(() => {
                    if (!popupShown && !hasJoinedWaitlist()) {
                        showWaitlistPopup();
                    }
                }, TIME_BASED_DELAY);
            }, 2000);

            // Close popup when clicking backdrop
            const backdrop = document.querySelector('.waitlist-popup-backdrop');
            if (backdrop) {
                backdrop.addEventListener('click', closeWaitlistPopup);
            }

            // Allow Enter key in popup input
            const popupInput = document.getElementById('popup-waitlist-email');
            if (popupInput) {
                popupInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        handlePopupWaitlist(e);
                    }
                });
            }

            // Close popup with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && popupShown) {
                    closeWaitlistPopup();
                }
            });
        });
    </script>
</body>
</html>

